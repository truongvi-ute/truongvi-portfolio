<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truong Vi UTE</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation Bar - Fixed -->
    <nav class="navbar">
        <div class="nav-container">
            <!-- Social Icons in Navbar - Left -->
            <div class="nav-icons">
                <div class="nav-icon">
                    <img src="images/ute.png" alt="UTE">
                </div>
                <div class="nav-icon">
                    <img src="images/fit.png" alt="FIT">
                </div>
            </div>
            <!-- Navigation Links - Right -->
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#assignments">Assignments</a></li>
                <li><a href="#about">Skills</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Main Content -->
        <main id="home" class="main-content">
            <div class="left-section">
                <!-- Avatar Container -->
                <div class="avatar-container">
                    <div class="avatar">
                        <img src="images/ava.png" alt="Avatar">
                    </div>
                </div>
            </div>

            <div class="right-section">
                <!-- Info Boxes -->
                <div class="info-list">
                    <div class="info-item">
                        <p><span class="prompt">root@</span><span id="name"></span><span class="cursor">_</span></p>
                    </div>
                    <div class="info-item">
                        <h3>Personal Information</h3>
                        <p class="info-with-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                            Hometown: Ca Mau (Bac Lieu)
                        </p>
                        <p class="info-with-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                            Date of Birth: July 11, 2005
                        </p>
                        <p class="info-with-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                            University: Ho Chi Minh City University of Technology and Education
                        </p>
                        <p class="info-with-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
                            Major: Information Technology
                        </p>
                        <p class="info-with-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
                            Specialization: Software Engineering
                        </p>
                        <p class="info-with-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                            Class: K23 CLC
                        </p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Assignments Section -->
        <section id="assignments" class="assignments">
            <h2>Web Programming Assignments</h2>
            <div class="assignment-list">
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 2 - 4 Assignment</h3>
                    <p>Demo</p>
                    <p>Practice HTML5, CSS3</p>
                    <a href="https://exercise02.onrender.com" target="_blank">View Assignment</a>
                </div>
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 6 Assignment</h3>
                    <p>Practice JSPs</p>
                    <p>Reuse header, footer</p>
                    <a href="https://btchuong6.onrender.com" target="_blank">View Assignment</a>
                </div>
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 7 Assignment</h3>
                    <p>Shopping Cart Exercise</p>
                    <p>Practice Cookies</p>
                    <a href="https://btchuong7-2j54.onrender.com" target="_blank">View Assignment</a>
                </div>
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 7 - Download</h3>
                    <p>CD Download Exercise</p>
                    <p>Practice Cookies</p>
                    <a href="https://btchuong7-download.onrender.com" target="_blank">View Assignment</a>
                </div>
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 12 - Email List</h3>
                    <p>Practice JDBC with PostgreSQL</p>
                    <p>Practice Connection Pool</p>
                    <a href="https://btchuong12-emaillist.onrender.com" target="_blank">View Assignment</a>
                </div>
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 12 - SQL Gateway</h3>
                    <p>Practice JDBC with PostgreSQL</p>
                    <p>Practice Database Data Access</p>
                    <a href="https://btchuong12-sqlgateway.onrender.com" target="_blank">View Assignment</a>
                </div>
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 13 - Email</h3>
                    <p>Practice JPA with PostgreSQL</p>
                    <p>Practice Entities and Entity Manager</p>
                    <a href="https://btchuong13-ex1-email.onrender.com" target="_blank">View Assignment</a>
                </div>
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 13 - User Admin</h3>
                    <p>Practice JPA with PostgreSQL</p>
                    <p>Practice Database Data Access</p>
                    <a href="https://btchuong13-useradmin.onrender.com" target="_blank">View Assignment</a>
                </div>
                <div class="assignment-item">
                    <div class="cloud-big"></div>
                    <h3>Chapter 14 - Send Email</h3>
                    <p>Practice Sending Email via Brevo API</p>
                    <a href="https://btchuong14-sendemail.onrender.com" target="_blank">View Assignment</a>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="about-section">
            <h2>Programming Skills</h2>
            <div class="skill-list">
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" alt="Java">
                    <span>Java</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" alt="Python">
                    <span>Python</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cplusplus/cplusplus-original.svg" alt="C++">
                    <span>C++</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/csharp/csharp-original.svg" alt="C#">
                    <span>C#</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="HTML">
                    <span>HTML</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg" alt="CSS">
                    <span>CSS</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg" alt="MySQL">
                    <span>MySQL</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg" alt="PostgreSQL">
                    <span>PostgreSQL</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/microsoftsqlserver/microsoftsqlserver-plain.svg" alt="SQL Server">
                    <span>SQL Server</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg" alt="Git">
                    <span>Git</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub">
                    <span>GitHub</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg" alt="Docker">
                    <span>Docker</span>
                </div>
                <div class="skill-icon">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/amazonwebservices/amazonwebservices-original-wordmark.svg" alt="AWS">
                    <span>AWS</span>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer id="contact" class="footer">
            <div class="footer-content">
                <div class="footer-left">
                    <h2>Contact</h2>
                    <div class="footer-info">
                        <div class="footer-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                            <span>nguyendoantruongvi11@email.com</span>
                        </div>
                        <div class="footer-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                            </svg>
                            <span>0886456740</span>
                        </div>
                        <div class="footer-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            <span>D2 Dormitory, 484 Le Van Viet, Tang Nhon Phu Ward, Ho Chi Minh City</span>
                        </div>
                    </div>
                    <div class="footer-social">
                        <a href="https://www.facebook.com/nguyen.oan.truong.vi?locale=vi_VN" target="_blank" class="social-icon" aria-label="Facebook">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </a>
                        <a href="https://github.com/truongvi-ute" target="_blank" class="social-icon" aria-label="GitHub">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="map-container">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3918.4851719497364!2d106.76918257570653!3d10.849906989301086!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752763f23816ab%3A0x282f711441b6916f!2zNDg0IEzDqiBWxINuIFZp4buHdCwgVMSDbmcgTmjGoW4gUGjDuiBBLCBUaOG7pyDEkOG7qWMsIFRow6BuaCBwaOG7kSBI4buTIENow60gTWluaCwgVmnhu4d0IE5hbQ!5e0!3m2!1svi!2s!4v1733420000000!5m2!1svi!2s" 
                            width="100%" 
                            height="100%" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
                <p class="footer-copyright">&copy; 2024 - Nguyen Doan Truong Vi - HCMUTE</p>
            </div>
        </footer>
    </div>

    <script>
        // Active Navigation Link
        function setActiveNavLink() {
            const sections = document.querySelectorAll('section[id], main[id]');
            const navLinks = document.querySelectorAll('.nav-links a');
            
            window.addEventListener('scroll', () => {
                let current = '';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (pageYOffset >= sectionTop - 100) {
                        current = section.getAttribute('id');
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + current) {
                        link.classList.add('active');
                    }
                });
            });
            
            // Set active on click
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        // Typewriter Effect với xóa và lặp lại
        const text = "Nguyen Doan Truong Vi 23110173";
        const nameElement = document.getElementById("name");
        const cursor = document.querySelector(".cursor");
        let index = 0;
        let isDeleting = false;

        function typeWriter() {
            const currentText = nameElement.textContent;
            
            if (!isDeleting) {
                // Đang đánh máy
                if (index < text.length) {
                    nameElement.textContent = text.substring(0, index + 1);
                    index++;
                    setTimeout(typeWriter, 100); // Tốc độ đánh máy
                } else {
                    // Đã đánh xong, chờ 5 giây rồi bắt đầu xóa
                    cursor.style.animation = "blink 1s infinite";
                    setTimeout(() => {
                        cursor.style.animation = "none";
                        isDeleting = true;
                        typeWriter();
                    }, 5000);
                }
            } else {
                // Đang xóa
                if (index > 0) {
                    nameElement.textContent = text.substring(0, index - 1);
                    index--;
                    setTimeout(typeWriter, 50); // Tốc độ xóa nhanh hơn
                } else {
                    // Đã xóa hết, bắt đầu lại
                    isDeleting = false;
                    setTimeout(typeWriter, 500); // Delay trước khi đánh lại
                }
            }
        }

        // Bắt đầu hiệu ứng khi trang load
        window.addEventListener('load', () => {
            setActiveNavLink();
            setTimeout(typeWriter, 500);
        });

        // Floating Skills Animation - DISABLED
        function initFloatingSkills() {
            return; // Tắt animation
            const skillList = document.querySelector('.skill-list');
            if (!skillList) {
                console.log('Skill list not found');
                return;
            }

            const skills = Array.from(document.querySelectorAll('.skill-icon'));
            if (skills.length === 0) {
                console.log('No skills found');
                return;
            }
            
            console.log('Found', skills.length, 'skills');
            const skillData = [];
            let mouseX = -1000;
            let mouseY = -1000;
            
            // Theo dõi vị trí chuột
            skillList.addEventListener('mousemove', (e) => {
                const rect = skillList.getBoundingClientRect();
                mouseX = e.clientX - rect.left;
                mouseY = e.clientY - rect.top;
            });
            
            skillList.addEventListener('mouseleave', () => {
                mouseX = -1;
                mouseY = -1;
            });
            
            skillList.addEventListener('mouseenter', () => {
                console.log('Mouse entered skill list');
            });
            
            // Đặt kích thước container
            skillList.style.position = 'relative';
            skillList.style.minHeight = '500px';
            
            // Lấy kích thước một skill để tính toán
            const tempRect = skills[0].getBoundingClientRect();
            const skillWidth = tempRect.width;
            const skillHeight = tempRect.height;
            
            const listRect = skillList.getBoundingClientRect();
            const containerWidth = listRect.width;
            const containerHeight = 500;
            
            // Tính toán grid để phân bố đồng đều
            const padding = 20;
            const cols = Math.floor(containerWidth / (skillWidth + padding * 2));
            const rows = Math.ceil(skills.length / cols);
            const actualHeight = rows * (skillHeight + padding * 2) + padding;
            skillList.style.minHeight = actualHeight + 'px';

            skills.forEach((skill, index) => {
                const col = index % cols;
                const row = Math.floor(index / cols);
                
                // Vị trí ban đầu phân bố đều
                const baseX = padding + col * (skillWidth + padding * 2) + (containerWidth - cols * (skillWidth + padding * 2)) / 2;
                const baseY = padding + row * (skillHeight + padding * 2);
                
                skillData.push({
                    element: skill,
                    x: baseX,
                    y: baseY,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    width: skillWidth,
                    height: skillHeight,
                    radius: Math.max(skillWidth, skillHeight) / 2
                });

                skill.style.position = 'absolute';
                skill.style.left = baseX + 'px';
                skill.style.top = baseY + 'px';
            });
            
            console.log('Animation initialized with', skillData.length, 'skills');

            function animate() {
                const containerWidth = skillList.offsetWidth;
                const containerHeight = skillList.offsetHeight;
                const marginSide = 40; // Khoảng cách tối thiểu từ cạnh trái/phải
                const marginTop = 50; // Khoảng cách tối thiểu từ cạnh trên
                const marginBottom = 40; // Khoảng cách tối thiểu từ cạnh dưới

                skillData.forEach((skill, i) => {
                    // Cập nhật vị trí
                    skill.x += skill.vx;
                    skill.y += skill.vy;

                    // Va chạm với cạnh trái - đẩy mạnh vào trong
                    if (skill.x <= marginSide) {
                        skill.x = marginSide + 2;
                        skill.vx = Math.abs(skill.vx) * 1.2;
                    }
                    // Va chạm với cạnh phải
                    if (skill.x + skill.width >= containerWidth - marginSide) {
                        skill.x = containerWidth - skill.width - marginSide - 2;
                        skill.vx = -Math.abs(skill.vx) * 1.2;
                    }
                    // Va chạm với cạnh trên
                    if (skill.y <= marginTop) {
                        skill.y = marginTop + 2;
                        skill.vy = Math.abs(skill.vy) * 1.2;
                    }
                    // Va chạm với cạnh dưới
                    if (skill.y + skill.height >= containerHeight - marginBottom) {
                        skill.y = containerHeight - skill.height - marginBottom - 2;
                        skill.vy = -Math.abs(skill.vy) * 1.2;
                    }

                    // Tránh chuột - lực mạnh hơn
                    if (mouseX > 0 && mouseY > 0) {
                        const skillCenterX = skill.x + skill.width / 2;
                        const skillCenterY = skill.y + skill.height / 2;
                        const dx = skillCenterX - mouseX;
                        const dy = skillCenterY - mouseY;
                        const mouseDistance = Math.sqrt(dx * dx + dy * dy);
                        const mouseAvoidRadius = 150;
                        
                        if (mouseDistance < mouseAvoidRadius && mouseDistance > 0) {
                            const force = Math.pow((mouseAvoidRadius - mouseDistance) / mouseAvoidRadius, 2);
                            const pushStrength = force * 3.5;
                            skill.vx += (dx / mouseDistance) * pushStrength;
                            skill.vy += (dy / mouseDistance) * pushStrength;
                        }
                    }

                    // Va chạm với các skill khác - chống đè lên nhau MẠNH
                    for (let j = i + 1; j < skillData.length; j++) {
                        const other = skillData[j];
                        const dx = (skill.x + skill.width/2) - (other.x + other.width/2);
                        const dy = (skill.y + skill.height/2) - (other.y + other.height/2);
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        const minDistance = skill.radius + other.radius + 20;

                        if (distance < minDistance) {
                            if (distance < 0.1) {
                                // Nếu quá gần, đẩy theo hướng ngẫu nhiên
                                const randomAngle = Math.random() * Math.PI * 2;
                                skill.x += Math.cos(randomAngle) * 5;
                                skill.y += Math.sin(randomAngle) * 5;
                                other.x -= Math.cos(randomAngle) * 5;
                                other.y -= Math.sin(randomAngle) * 5;
                                skill.vx = Math.cos(randomAngle) * 2;
                                skill.vy = Math.sin(randomAngle) * 2;
                                other.vx = -Math.cos(randomAngle) * 2;
                                other.vy = -Math.sin(randomAngle) * 2;
                            } else {
                                // Tách rời RẤT MẠNH khi va chạm
                                const angle = Math.atan2(dy, dx);
                                const overlap = minDistance - distance;
                                
                                // Đẩy ra xa nhau RẤT MẠNH
                                const separationForce = overlap * 0.8;
                                const pushX = Math.cos(angle) * separationForce;
                                const pushY = Math.sin(angle) * separationForce;
                                
                                skill.x += pushX;
                                skill.y += pushY;
                                other.x -= pushX;
                                other.y -= pushY;
                                
                                // Tính toán vận tốc mới dựa trên va chạm đàn hồi
                                const relativeVx = skill.vx - other.vx;
                                const relativeVy = skill.vy - other.vy;
                                const dotProduct = (relativeVx * dx + relativeVy * dy) / (distance * distance);
                                
                                if (dotProduct > 0) {
                                    const impulse = 2.5 * dotProduct;
                                    skill.vx -= impulse * dx;
                                    skill.vy -= impulse * dy;
                                    other.vx += impulse * dx;
                                    other.vy += impulse * dy;
                                }
                                
                                // Thêm lực đẩy MẠNH để tránh dính vào nhau
                                const repelForce = 0.8;
                                skill.vx += (dx / distance) * repelForce;
                                skill.vy += (dy / distance) * repelForce;
                                other.vx -= (dx / distance) * repelForce;
                                other.vy -= (dy / distance) * repelForce;
                            }
                        }
                    }

                    // Giới hạn tốc độ
                    const speed = Math.sqrt(skill.vx * skill.vx + skill.vy * skill.vy);
                    const maxSpeed = 4;
                    if (speed > maxSpeed) {
                        skill.vx = (skill.vx / speed) * maxSpeed;
                        skill.vy = (skill.vy / speed) * maxSpeed;
                    }
                    
                    // Đảm bảo tốc độ tối thiểu
                    if (speed < 0.3) {
                        const angle = Math.random() * Math.PI * 2;
                        skill.vx = Math.cos(angle) * 0.8;
                        skill.vy = Math.sin(angle) * 0.8;
                    }
                    
                    // Thêm ma sát nhẹ để ổn định
                    skill.vx *= 0.98;
                    skill.vy *= 0.98;

                    // Áp dụng vị trí mới
                    skill.element.style.left = Math.round(skill.x) + 'px';
                    skill.element.style.top = Math.round(skill.y) + 'px';
                });

                requestAnimationFrame(animate);
            }

            animate();
        }
    </script>
</body>
</html>
